# Implementation Plan

## 🚀 実装順序：trivago-clone-complete

トリバゴ完全クローンの段階的実装計画。各タスクはトリバゴの該当部分を正確に再現することを目的とする。

- [x] 1. プロジェクト基盤とデザインシステムの構築
  - トリバゴ準拠のTailwind設定とCSS変数を定義
  - トリバゴのカラーパレット（#ff6b35メイン、グレースケール）を実装
  - トリバゴのフォントスタック（-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto）を設定
  - トリバゴのスペーシング・ブレークポイント・アニメーション設定
  - _Requirements: 7.1_

- [x] 2. 基本レイアウト（Header/Footer）の実装
  - [x] 2.1 トリバゴHeaderコンポーネントの完全再現
    - 左：「サプティア」ロゴ（トリバゴと同じフォント・サイズ）
    - 右：「お気に入り」リンク（トリバゴと同じスタイル）
    - 高さ60px、白背景、下ボーダー1px #e0e0e0
    - _Requirements: 6.1_

  - [x] 2.2 トリバゴFooterコンポーネントの完全再現
    - 大量のSEOリンクをトリバゴと同じレイアウトで配置
    - カテゴリ別リンク（ビタミンD、プロテイン、マルチビタミン等）
    - 地域別リンク（国内、海外ブランド等）
    - トリバゴと同じフォントサイズ・色・間隔
    - _Requirements: 6.2_

- [x] 3. ホームページヒーローセクションの実装
  - [x] 3.1 HeroSectionコンポーネントの作成
    - フルスクリーン（100vh）背景グラデーション
    - 「次回のサプリ購入を最大50%お得に予約」キャッチコピー
    - トリバゴと同じテキストサイズ・配置・色（白文字）
    - _Requirements: 1.1, 1.2_

  - [x] 3.2 SearchBarコンポーネントの実装
    - 幅800px、高さ60px、白背景、#ff6b35ボーダー
    - 右側に検索ボタン（#ff6b35背景、白文字）
    - プレースホルダー「サプリメントを検索」
    - オートコンプリート・サジェスト機能
    - _Requirements: 1.3, 8.1_

  - [x] 3.3 PartnerLogosコンポーネントの実装
    - 「100を超えるサイトのサプリ価格をサプティアが比較します」テキスト
    - Amazon、iHerb、楽天、DHC等のロゴを横並び表示
    - ロゴサイズ120px×60px、間隔40px、グレースケール→カラー（ホバー）
    - _Requirements: 1.4_

- [x] 4. 人気商品セクションの実装
  - [x] 4.1 PopularSearchCardsコンポーネントの作成
    - 6列グリッド（デスクトップ）、3列（タブレット）、2列（モバイル）
    - カードサイズ258px×258px、画像+オーバーレイテキスト
    - 「ビタミンD 1,234商品 平均価格 ¥2,980」形式
    - ホバー時transform: scale(1.05)
    - _Requirements: 2.1, 2.2, 2.3_

  - [x] 4.2 カテゴリデータの実装
    - Sanityでサプリカテゴリデータ管理
    - ビタミンD、プロテイン、マルチビタミン、オメガ3、コラーゲン、鉄分
    - 各カテゴリの商品数・平均価格・画像データ
    - _Requirements: 2.4_

- [x] 5. 価格チャートセクションの実装
  - [x] 5.1 PriceChartコンポーネントの作成
    - 「サプリメントの購入に最適な時期をチェック」セクションヘッダー
    - カテゴリタブ（ビタミンD、プロテイン、マルチビタミン等）
    - 月別価格推移グラフ（Chart.js使用）
    - グラフ色#ff6b35、サイズ800px×300px
    - _Requirements: 3.1, 3.2, 3.3, 3.4_

  - [x] 5.2 価格データの実装
    - 月別平均価格データの管理
    - カテゴリ別価格推移データ
    - 3つ星商品平均価格基準の実装
    - _Requirements: 3.4_

- [x] 6. 検索結果ページの実装
  - [x] 6.1 SearchFiltersコンポーネントの作成
    - 左サイドバー（幅280px）、白背景、ボーダー
    - カテゴリ、価格帯、ブランド、評価、成分フィルター
    - チェックボックス・スライダーのトリバゴ準拠スタイル
    - リアルタイム結果数更新
    - _Requirements: 4.1, 4.2, 8.2_

  - [x] 6.2 ProductCardコンポーネントの作成
    - 横並びレイアウト（画像200px×150px + 情報 + 価格）
    - 商品名・ブランド・評価・レビュー数表示
    - 複数サイト価格比較表示
    - お気に入り・比較追加ボタン
    - _Requirements: 4.3, 4.4_

  - [x] 6.3 検索・ソート・ページネーション機能
    - 価格順・評価順・人気順ソート
    - ページネーション（トリバゴと同じスタイル）
    - 検索結果数表示
    - フィルター適用時のURL更新
    - _Requirements: 8.1, 8.2, 8.4_

- [x] 7. 商品比較ページの実装
  - [x] 7.1 ComparisonTableコンポーネントの作成
    - 横スクロール対応比較テーブル
    - 商品画像ヘッダー（各列250px幅）
    - 価格・成分・容量・評価・仕様比較行
    - Stickyヘッダー実装
    - _Requirements: 5.1, 5.2, 5.3_

- [x] 7.2 比較機能とCTAの実装
  - 商品追加・削除機能
  - 最大4商品まで比較可能
  - 各列下部に「最安値で購入」CTAボタン（#ff6b35）
  - 外部サイトへのリンク機能
  - _Requirements: 5.4_

- [ ] 8. データ管理とAPI実装
- [x] 8.1 Sanity商品データスキーマ作成
  - Product、Category、Brand、Priceスキーマ定義
  - 商品画像・成分・仕様・価格データ管理
  - 複数販売サイトの価格追跡
  - _Requirements: 全般_

- [x] 8.2 検索・フィルタリングAPI実装
  - GROQ クエリによる商品検索
  - フィルター条件に基づく絞り込み
  - ソート・ページネーション対応
  - パフォーマンス最適化（インデックス設定）
  - _Requirements: 8.1, 8.2_

- [x] 9. レスポンシブ対応とモバイル最適化
  - [x] 9.1 モバイル対応（767px以下）
    - ハンバーガーメニューヘッダー
    - 縦積みヒーローレイアウト
    - 2列人気商品グリッド
    - フィルターモーダル実装
    - _Requirements: 6.4_

  - [x] 9.2 タブレット対応（768px-1199px）
    - 3列人気商品グリッド
    - 折りたたみ可能フィルター
    - 検索バー幅調整
    - タッチ操作最適化
    - _Requirements: 6.4_

- [x] 10. パフォーマンス最適化
  - [x] 10.1 画像最適化とCore Web Vitals
    - Next.js Image最適化（WebP、適切なサイズ）
    - LCP < 2.5s、FID < 100ms、CLS < 0.1達成
    - 重要リソースのプリロード
    - バンドルサイズ最適化
    - _Requirements: 7.1_

  - [x] 10.2 SEO最適化
    - トリバゴ準拠のメタタグ・構造化データ実装
    - サイトマップ・robots.txt設定
    - 内部リンク最適化
    - ページ速度最適化
    - _Requirements: 7.2_

- [x] 11. テスト実装
  - [x] 11.1 Unit Tests (vitest)
    - SearchBar入力・サジェスト表示テスト
    - ProductCard表示・インタラクションテスト
    - PriceChart データ表示・タブ切り替えテスト
    - フィルター機能テスト
    - _Requirements: Tests_

  - [x] 11.2 E2E Tests (playwright)
    - ホームページ初期表示テスト
    - 検索→結果→比較フローテスト
    - レスポンシブ表示テスト
    - パフォーマンステスト
    - _Requirements: Tests_

  - [x] 11.3 Visual Regression Tests
    - トリバゴとの見た目比較テスト
    - 各ブレークポイント表示確認
    - ブラウザ間互換性テスト
    - _Requirements: 7.3_

- [x] 12. 最終統合とデプロイ準備
  - [x] 12.1 品質チェックとLighthouse検証
    - Performance/SEO/Accessibility 90+達成
    - トリバゴレベルのCore Web Vitals確認
    - 全機能動作確認
    - _Requirements: 7.1, 7.2, 7.3_

  - [x] 12.2 本番デプロイ準備
    - 環境変数設定（Sanity、外部API）
    - CDN・キャッシュ設定
    - モニタリング・エラー追跡設定
    - PR作成・Vercel Preview確認
    - _Requirements: DoD_

## 🎯 実装優先度

### Phase 1: 基盤構築（タスク1-2）

- デザインシステム基盤
- Header/Footer基本レイアウト

### Phase 2: ホームページ完成（タスク3-5）

- ヒーローセクション
- 人気商品グリッド
- 価格チャート

### Phase 3: 検索・比較機能（タスク6-7）

- 検索結果ページ
- 商品比較ページ

### Phase 4: データ・API（タスク8）

- Sanityデータ管理
- 検索・フィルタリングAPI

### Phase 5: 品質保証（タスク9-12）

- レスポンシブ対応
- パフォーマンス最適化
- テスト実装
- デプロイ準備

## 📋 実装チェックリスト

### ✅ トリバゴ完全再現確認項目

#### デザイン品質

- [x] **色**: #ff6b35メインカラーの一貫使用
- [x] **フォント**: -apple-system, BlinkMacSystemFont使用
- [x] **レイアウト**: トリバゴと同じ配置・余白・サイズ
- [x] **アニメーション**: 同じホバー効果・トランジション

#### 機能完全性

- [x] **検索**: オートコンプリート・サジェスト動作
- [x] **フィルター**: リアルタイム絞り込み・結果数更新
- [x] **比較**: 最大4商品比較・横スクロールテーブル
- [x] **ソート**: 価格順・評価順・人気順

#### パフォーマンス

- [x] **Lighthouse**: Performance/SEO/Accessibility 90+
- [x] **Core Web Vitals**: LCP<2.5s, FID<100ms, CLS<0.1
- [x] **レスポンシブ**: 全ブレークポイント対応

#### SEO対応

- [x] **メタタグ**: トリバゴ準拠の構造
- [x] **構造化データ**: WebSite、Product、BreadcrumbList
- [x] **内部リンク**: 大量カテゴリリンク実装

### 🎨 Visual Quality Checklist

#### ホームページ

- [x] **ヒーロー**: フルスクリーン、グラデーション背景
- [x] **検索バー**: 800px幅、#ff6b35ボーダー
- [x] **パートナーロゴ**: 120px×60px、グレースケール→カラー
- [x] **人気商品**: 6列グリッド、258px×258pxカード

#### 検索結果ページ

- [x] **フィルター**: 280px幅サイドバー
- [x] **商品カード**: 横並び、200px×150px画像
- [x] **ページネーション**: トリバゴと同じスタイル

#### 比較ページ

- [x] **比較テーブル**: 250px列幅、横スクロール
- [x] **CTAボタン**: #ff6b35背景、各列下部

### 📱 Responsive Checklist

#### Desktop (1200px+)

- [x] **ヘッダー**: フル幅、ロゴ左、メニュー右
- [x] **人気商品**: 6列グリッド
- [x] **検索結果**: 左フィルター + 右リスト

#### Tablet (768px-1199px)

- [x] **人気商品**: 3列グリッド
- [x] **フィルター**: 折りたたみ可能

#### Mobile (767px以下)

- [x] **ヘッダー**: ハンバーガーメニュー
- [x] **人気商品**: 2列グリッド
- [x] **フィルター**: モーダル表示

---

**重要**: この実装計画はトリバゴの完全再現を目的としています。各タスクでは該当するトリバゴの部分を正確に分析し、同じユーザー体験を提供することを最優先とします。独自の改善や最適化は行わず、まずは完全なクローンの完成を目指します。
