# Implementation Plan

- [x] 1. プロジェクト基盤の準備とコンポーネント構造の確立
  - 新規コンポーネントファイルの作成とディレクトリ構造の整備
  - TypeScript型定義の作成と既存型との統合
  - 基本的なコンポーネントスケルトンの実装
  - _Requirements: 1.1, 2.1_

- [ ] 2. ヒーローセクションの実装
  - [x] 2.1 HeroSectionコンポーネントの作成
    - ブランド見出し、サブコピー、検索バーを含むレイアウト実装
    - レスポンシブデザイン（モバイル・タブレット・デスクトップ）対応
    - フェードインアニメーションの実装
    - _Requirements: 1.1, 1.2, 2.1, 2.2, 2.3_

  - [x] 2.2 AIRecommendationSearchBarの統合
    - 既存のAIRecommendationSearchBarコンポーネントをヒーローセクションに統合
    - 大型サイズでの表示とスタイリング調整
    - 検索機能とAIサジェスト機能の動作確認
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6_

- [ ] 3. 主要導線カードセクションの実装
  - [x] 3.1 HomePrimaryActionsコンポーネントの作成
    - 比較・診断・成分ガイドの3つのアクションカード実装
    - グリッドレイアウト（3列→2列→1列）のレスポンシブ対応
    - ガラス効果とシャドウスタイルの適用
    - _Requirements: 1.4, 2.1, 2.2, 2.3_

  - [x] 3.2 カードインタラクションの実装
    - ホバー効果（持ち上がり、シャドウ変化）の実装
    - フォーカスリングとキーボードナビゲーション対応
    - 適切なARIA属性の設定
    - _Requirements: 7.2, 7.3, 7.6_

- [ ] 4. 商品表示コンポーネントの実装
  - [x] 4.1 ProductCardコンポーネントの作成
    - 商品画像、名称、価格、実効コストの表示実装
    - next/imageを使用した画像最適化
    - ClientPriceコンポーネントによる価格表示
    - _Requirements: 4.1, 4.2, 8.4, 9.3, 9.4_

  - [x] 4.2 PopularProductsSectionコンポーネントの作成
    - 人気商品の3列グリッドレイアウト実装
    - calculateEffectiveCostPerDayを使用した実効コスト計算
    - レスポンシブ対応（3列→2列→1列）
    - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6_

- [ ] 5. 成分カテゴリガイドセクションの実装
  - [x] 5.1 IngredientCategoriesSectionコンポーネントの作成
    - ビタミン、ミネラル、ハーブ、アミノ酸カテゴリカードの実装
    - アイコン、見出し、説明、リンクを含むカードデザイン
    - グリッドレイアウトとレスポンシブ対応
    - _Requirements: 5.1, 5.2, 5.4_

  - [x] 5.2 カテゴリリンクとナビゲーションの実装
    - /ingredients?category=... への適切な遷移実装
    - ホバー効果とビジュアルフィードバック
    - アクセシビリティ対応（フォーカス、ARIA属性）
    - _Requirements: 5.3, 7.2, 7.6_

- [ ] 6. 信頼性指標セクションの実装
  - [x] 6.1 TrustIndicatorsSectionコンポーネントの作成
    - 科学的根拠準拠、価格監視、ユーザーフィードバックの3指標実装
    - アイコン、タイトル、説明、メトリクスの表示
    - 3列グリッドレイアウトとレスポンシブ対応
    - _Requirements: 12.1, 12.2, 12.3_

- [ ] 7. 言語・通貨切替機能の統合
  - [x] 7.1 LocaleContextとの統合確認
    - 既存のLocaleContextが正しく動作することを確認
    - 言語切替時のコンテンツ更新テスト
    - localStorage設定の保存・復元テスト
    - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5_

  - [x] 7.2 多言語コンテンツの実装
    - 日本語・英語のコンテンツ定義と切替実装
    - ClientPriceコンポーネントによるJPY/USD価格表示
    - html lang属性の同期更新実装
    - _Requirements: 9.1, 9.2, 9.3, 9.4, 9.5_

- [ ] 8. レスポンシブデザインの実装と調整
  - [x] 8.1 ブレークポイント対応の実装
    - モバイル（0-639px）、タブレット（640-1023px）、デスクトップ（1024px+）対応
    - 各セクションのグリッドレイアウト調整
    - フォントサイズとスペーシングの最適化
    - _Requirements: 2.1, 2.2, 2.3, 2.4_

  - [x] 8.2 コンテナとスペーシングの統一
    - 最大幅1200pxのコンテナ設定
    - セクション間の適切なスペーシング（py-16, py-10）
    - 要素間のgap-6基準の適用
    - _Requirements: 2.5_

- [ ] 9. アクセシビリティ機能の実装
  - [x] 9.1 セマンティックHTMLとランドマークの実装
    - header, main, footerの適切な配置
    - セクション見出しの階層構造実装
    - ナビゲーション要素のrole属性設定
    - _Requirements: 7.1, 7.6_

  - [x] 9.2 キーボードナビゲーションの実装
    - Tab順序の最適化
    - フォーカスリングの表示（マウス操作時は非表示）
    - Escapeキーによるメニュー閉じる機能
    - _Requirements: 7.2, 7.3_

  - [x] 9.3 ARIA属性とスクリーンリーダー対応
    - 検索バーのcombobox/listbox/optionパターン実装
    - 画像の適切なalt属性設定
    - aria-current、aria-expanded等の動的属性更新
    - _Requirements: 7.4, 7.6_

  - [ ] 9.4 コントラスト比とカラーアクセシビリティ
    - 4.5:1以上のコントラスト比確保
    - ボタンとリンクの視認性向上
    - カラーのみに依存しない情報伝達の実装
    - _Requirements: 7.5_

- [ ] 10. パフォーマンス最適化の実装
  - [x] 10.1 画像最適化とLazy Loading
    - next/imageコンポーネントの適切な設定
    - sizes属性による最適なサイズ指定
    - 遅延読み込みとプレースホルダーの実装
    - _Requirements: 8.4_

  - [ ] 10.2 コード分割と動的インポート
    - 重要でないコンポーネントの動的インポート実装
    - ローディングスケルトンの作成
    - バンドルサイズの最適化
    - _Requirements: 8.5_

  - [ ] 10.3 LCPとCLS最適化
    - ヒーロー見出しと検索バーの最適化
    - レイアウトシフト防止のためのサイズ指定
    - フォント読み込み最適化
    - _Requirements: 8.1, 8.2_

- [ ] 11. セキュリティとCSP対応
  - [x] 11.1 既存CSPポリシーの確認と調整
    - Google Fonts、Sanity等の必要originの確認
    - インラインスタイルの最小化
    - 外部リソース読み込みの検証
    - _Requirements: 10.1, 10.2_

  - [ ] 11.2 入力検証とサニタイゼーション
    - 検索クエリのサニタイゼーション実装
    - XSS対策の確認
    - URLパラメータの検証
    - _Requirements: 10.3_

- [ ] 12. SEO最適化の実装
  - [ ] 12.1 メタデータとOGタグの設定
    - 既存のgenerateSEO関数の活用
    - タイトル、ディスクリプション、OGタグの最適化
    - Twitter Cardの設定
    - _Requirements: 11.1, 11.2_

  - [ ] 12.2 構造化データの維持
    - 既存のJSON-LDスキーマの確認
    - 商品情報の構造化データ追加
    - パンくずリストの実装
    - _Requirements: 11.3, 11.4_

- [ ] 13. メインページコンポーネントの統合
  - [x] 13.1 page.tsxの再構築
    - 新しいコンポーネントを使用したページ構成の実装
    - 既存のgetProducts関数との統合
    - サーバーサイドデータ取得の最適化
    - _Requirements: 1.1, 4.1_

  - [ ] 13.2 エラーハンドリングとフォールバック
    - 商品データ取得エラー時のフォールバック実装
    - ローディング状態の管理
    - エラーバウンダリの設定
    - _Requirements: 4.1_

- [ ] 14. テスト実装
  - [ ] 14.1 単体テストの作成
    - 各コンポーネントの基本機能テスト
    - プロパティ渡しとレンダリングテスト
    - ユーザーインタラクションテスト
    - _Requirements: 1.1, 2.1, 3.1, 4.1, 5.1_

  - [ ] 14.2 アクセシビリティテストの実装
    - axe-coreを使用した自動テスト
    - キーボードナビゲーションテスト
    - スクリーンリーダー対応テスト
    - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_

  - [ ] 14.3 E2Eテストの作成
    - ページ読み込みと表示テスト
    - 検索機能のエンドツーエンドテスト
    - 主要導線のナビゲーションテスト
    - _Requirements: 1.1, 3.1, 5.3_

- [ ] 15. パフォーマンステストと最適化
  - [ ] 15.1 Lighthouse CIテストの実行
    - LCP、CLS、TBTのしきい値確認
    - パフォーマンススコアの測定
    - 改善点の特定と修正
    - _Requirements: 8.1, 8.2, 8.3_

  - [ ] 15.2 バンドルサイズ分析と最適化
    - webpack-bundle-analyzerによる分析
    - 不要な依存関係の除去
    - コード分割の最適化
    - _Requirements: 8.3, 8.5_

- [ ] 16. 最終統合とデプロイ準備
  - [ ] 16.1 全機能の統合テスト
    - 全セクションの表示と動作確認
    - レスポンシブデザインの最終確認
    - 多言語・多通貨機能の動作確認
    - _Requirements: 1.1, 2.1, 6.1, 9.1_

  - [ ] 16.2 本番環境対応の確認
    - 環境変数とビルド設定の確認
    - CSPヘッダーの動作確認
    - CDN配信とキャッシュ設定の確認
    - _Requirements: 10.1, 11.4_
