# セキュリティポリシー

## サポートされているバージョン

現在セキュリティアップデートを提供しているバージョン：

| バージョン | サポート状況  |
| ---------- | ------------- |
| 最新版     | ✅ サポート中 |
| 開発版     | ✅ サポート中 |

## 脆弱性の報告

セキュリティ脆弱性を発見した場合は、以下の手順に従って報告してください。

### 報告方法

1. **GitHub Security Advisories** を使用（推奨）
   - リポジトリの「Security」タブから「Report a vulnerability」を選択
   - 非公開で脆弱性を報告できます

2. **メール報告**
   - セキュリティチーム: security@suptia.com
   - 件名: `[SECURITY] Suptia脆弱性報告`

### 報告に含めるべき情報

- 脆弱性の詳細な説明
- 再現手順
- 影響範囲の評価
- 可能であれば修正案
- 発見者の連絡先情報

### 対応プロセス

1. **受領確認**: 24時間以内に報告の受領を確認
2. **初期評価**: 72時間以内に脆弱性の初期評価を実施
3. **詳細調査**: 必要に応じて追加情報を要求
4. **修正開発**: 脆弱性の修正を開発
5. **テスト**: 修正の動作確認とセキュリティテスト
6. **リリース**: セキュリティアップデートのリリース
7. **公開**: 適切なタイミングで脆弱性情報を公開

## セキュリティ対策

### 自動化されたセキュリティチェック

本プロジェクトでは以下のセキュリティチェックを自動化しています：

#### 1. 依存関係スキャン

- **Dependabot**: 依存関係の脆弱性を自動検出・修正
- **npm audit**: パッケージの既知の脆弱性をチェック
- **実行頻度**: 毎週月曜日 + プッシュ時

#### 2. コードスキャン

- **CodeQL**: コードの品質とセキュリティ分析
- **実行頻度**: 毎週火曜日 + プッシュ時

#### 3. シークレットスキャン

- **GitHub Secret Scanning**: 機密情報の漏洩を検出
- **Secretlint**: 追加のシークレット検出
- **実行頻度**: 毎日 + プッシュ時

#### 4. ライセンスコンプライアンス

- **License Checker**: 使用ライセンスの確認
- **許可ライセンス**: MIT, Apache-2.0, BSD-2-Clause, BSD-3-Clause, ISC, 0BSD, Unlicense, CC0-1.0

### 開発時のセキュリティ対策

#### 環境変数の管理

```bash
# ✅ 良い例
NEXT_PUBLIC_API_URL=https://api.example.com
DATABASE_URL=postgresql://...

# ❌ 悪い例 - 機密情報をコードに直接記述
const apiKey = "sk-1234567890abcdef";
```

#### シークレットの取り扱い

- `.env`ファイルは`.gitignore`に含める
- 本番環境のシークレットはVercelの環境変数で管理
- GitHub Secretsを使用してCI/CDでシークレットを管理

#### コードレビューでのチェックポイント

- [ ] 機密情報がハードコードされていない
- [ ] 入力値の適切なバリデーション
- [ ] SQLインジェクション対策
- [ ] XSS対策
- [ ] CSRF対策

### インフラストラクチャセキュリティ

#### Vercel設定

- **HTTPS強制**: すべての通信をHTTPS化
- **セキュリティヘッダー**: 適切なセキュリティヘッダーを設定
- **環境分離**: 本番環境とプレビュー環境を分離

#### GitHub設定

- **ブランチ保護**: masterブランチへの直接プッシュを禁止
- **必須チェック**: セキュリティチェックの通過を必須化
- **レビュー必須**: コードレビューを必須化

## インシデント対応

### セキュリティインシデント発生時の対応

1. **即座の対応**
   - 影響範囲の特定
   - 被害の拡大防止
   - 関係者への通知

2. **調査・分析**
   - 原因の特定
   - 影響範囲の詳細調査
   - 証拠の保全

3. **修正・復旧**
   - 脆弱性の修正
   - システムの復旧
   - セキュリティ対策の強化

4. **事後対応**
   - インシデントレポートの作成
   - 再発防止策の実施
   - 関係者への報告

### 緊急連絡先

- **セキュリティチーム**: security@suptia.com
- **開発チーム**: dev@suptia.com
- **プロジェクト管理者**: admin@suptia.com

## セキュリティ教育

### 開発者向けガイドライン

1. **セキュアコーディング**
   - OWASP Top 10の理解
   - 入力値検証の実装
   - 適切なエラーハンドリング

2. **依存関係管理**
   - 定期的な依存関係の更新
   - 脆弱性情報の監視
   - 最小権限の原則

3. **認証・認可**
   - 強力なパスワードポリシー
   - 多要素認証の実装
   - セッション管理

### 推奨リソース

- [OWASP Web Security Testing Guide](https://owasp.org/www-project-web-security-testing-guide/)
- [Node.js Security Best Practices](https://nodejs.org/en/docs/guides/security/)
- [Next.js Security Headers](https://nextjs.org/docs/advanced-features/security-headers)

## 監査とコンプライアンス

### 定期監査

- **月次**: 依存関係の脆弱性チェック
- **四半期**: セキュリティ設定の見直し
- **年次**: 包括的なセキュリティ監査

### コンプライアンス要件

- **データ保護**: 個人情報の適切な取り扱い
- **ログ管理**: セキュリティログの保存・監視
- **アクセス制御**: 最小権限の原則に基づくアクセス管理

## 更新履歴

| 日付       | バージョン | 変更内容 |
| ---------- | ---------- | -------- |
| 2024-01-XX | 1.0        | 初版作成 |

---

**注意**: このセキュリティポリシーは定期的に見直し、更新されます。最新版を確認してください。
